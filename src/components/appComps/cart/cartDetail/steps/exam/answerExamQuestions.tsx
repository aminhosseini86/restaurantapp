import { In_ExamFormFieldsProps } from "@/types/exam";
import { ReactNode } from "react";

const data = {
  code: 200,
  token:
    "Y1N3ZnFleVJQcW9YaXRCMUxzNmtkVW9aV1haM2RJb1FwdlJlNFQ5TUpqamhYcE1YeWVJeWowUmZRQWJt696e69f640ff7",
  message: "",
  data: {
    id: 133,
    title: "توضیحات سفارش",
    bank_id: "26",
    score: null,
    deleted_at: null,
    redirect: null,
    message: null,
    cover_image: null,
    login_status: "0",
    category_id: "0",
    questions: [
      {
        id: 633,
        exam_id: "133",
        question_id: "179",
        score: null,
        exam_order: "0",
        question: {
          id: 179,
          bank_id: "26",
          title: "کره برنج جدا باشد یا روی برنج ریخته شود؟",
          description: "کره برنج جدا باشد یا روی برنج ریخته شود؟",
          type_id: "2",
          is_force: "0",
          image_id: null,
          video_id: null,
          score: "1",
          session: null,
          page: null,
          book: null,
          degree: null,
          lat: null,
          lan: null,
          slider_id: "23",
          deleted_at: null,
          slider: {
            id: 23,
            name: "اسلایدر اصلی",
            show_type: "0",
            created_at: "2020-12-28 12:06:14",
            updated_at: "2022-04-12 13:04:18",
            slides: [
              {
                id: 64,
                slider_id: "23",
                media_id: "1934",
                cover_id: null,
                type_id: "0",
                order: "0",
                created_at: "2020-12-30 10:07:15",
                updated_at: "2022-04-12 13:03:51",
                media_url: "https:\/\/polorest.ir\/loadImage\/1934",
                cover_url: null,
              },
            ],
          },
          answers: [
            {
              id: 1319,
              question_id: "179",
              title: "روی برنج ریخته شود.",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1320,
              question_id: "179",
              title: "جدا قرار داده شود",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
          ],
          type: {
            id: 2,
            title: "تک گزینه ای",
            active: "1",
            created_at: null,
            updated_at: null,
          },
        },
      },
      {
        id: 634,
        exam_id: "133",
        question_id: "180",
        score: null,
        exam_order: "1",
        question: {
          id: 180,
          bank_id: "26",
          title: "مزه دلستر خود را تایپ کنید",
          description: null,
          type_id: "3",
          is_force: "0",
          image_id: null,
          video_id: null,
          score: "1",
          session: null,
          page: null,
          book: null,
          degree: null,
          lat: null,
          lan: null,
          slider_id: "23",
          deleted_at: null,
          slider: {
            id: 23,
            name: "اسلایدر اصلی",
            show_type: "0",
            created_at: "2020-12-28 12:06:14",
            updated_at: "2022-04-12 13:04:18",
            slides: [
              {
                id: 64,
                slider_id: "23",
                media_id: "1934",
                cover_id: null,
                type_id: "0",
                order: "0",
                created_at: "2020-12-30 10:07:15",
                updated_at: "2022-04-12 13:03:51",
                media_url: "https:\/\/polorest.ir\/loadImage\/1934",
                cover_url: null,
              },
            ],
          },
          answers: [
            {
              id: 1321,
              question_id: "180",
              title: "لیمو",
              image_id: null,
              is_right: "1",
              score: "1",
              deleted_at: null,
            },
            {
              id: 1322,
              question_id: "180",
              title: "تلخ",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1323,
              question_id: "180",
              title: "هلو",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1324,
              question_id: "180",
              title: "استوایی",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
          ],
          type: {
            id: 3,
            title: "توصیفی",
            active: "1",
            created_at: null,
            updated_at: null,
          },
        },
      },
      {
        id: 635,
        exam_id: "133",
        question_id: "181",
        score: null,
        exam_order: "2",
        question: {
          id: 181,
          bank_id: "26",
          title: "زیر کباب نان داشته باشد؟",
          description: null,
          type_id: "2",
          is_force: "0",
          image_id: null,
          video_id: null,
          score: "1",
          session: null,
          page: null,
          book: null,
          degree: null,
          lat: null,
          lan: null,
          slider_id: "23",
          deleted_at: null,
          slider: {
            id: 23,
            name: "اسلایدر اصلی",
            show_type: "0",
            created_at: "2020-12-28 12:06:14",
            updated_at: "2022-04-12 13:04:18",
            slides: [
              {
                id: 64,
                slider_id: "23",
                media_id: "1934",
                cover_id: null,
                type_id: "0",
                order: "0",
                created_at: "2020-12-30 10:07:15",
                updated_at: "2022-04-12 13:03:51",
                media_url: "https:\/\/polorest.ir\/loadImage\/1934",
                cover_url: null,
              },
            ],
          },
          answers: [
            {
              id: 1325,
              question_id: "181",
              title: "بله",
              image_id: null,
              is_right: "1",
              score: "1",
              deleted_at: null,
            },
            {
              id: 1333,
              question_id: "181",
              title: "خیر",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
          ],
          type: {
            id: 2,
            title: "تک گزینه ای",
            active: "1",
            created_at: null,
            updated_at: null,
          },
        },
      },
      {
        id: 636,
        exam_id: "133",
        question_id: "182",
        score: null,
        exam_order: "3",
        question: {
          id: 182,
          bank_id: "26",
          title: "دورچین داشته باشد؟",
          description: null,
          type_id: "2",
          is_force: "0",
          image_id: null,
          video_id: null,
          score: "1",
          session: null,
          page: null,
          book: null,
          degree: null,
          lat: null,
          lan: null,
          slider_id: "23",
          deleted_at: null,
          slider: {
            id: 23,
            name: "اسلایدر اصلی",
            show_type: "0",
            created_at: "2020-12-28 12:06:14",
            updated_at: "2022-04-12 13:04:18",
            slides: [
              {
                id: 64,
                slider_id: "23",
                media_id: "1934",
                cover_id: null,
                type_id: "0",
                order: "0",
                created_at: "2020-12-30 10:07:15",
                updated_at: "2022-04-12 13:03:51",
                media_url: "https:\/\/polorest.ir\/loadImage\/1934",
                cover_url: null,
              },
            ],
          },
          answers: [
            {
              id: 1331,
              question_id: "182",
              title: "بله",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1332,
              question_id: "182",
              title: "خیر",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
          ],
          type: {
            id: 2,
            title: "تک گزینه ای",
            active: "1",
            created_at: null,
            updated_at: null,
          },
        },
      },
      {
        id: 637,
        exam_id: "133",
        question_id: "183",
        score: null,
        exam_order: "4",
        question: {
          id: 183,
          bank_id: "26",
          title: "سایر",
          description: null,
          type_id: "1",
          is_force: "0",
          image_id: null,
          video_id: null,
          score: "1",
          session: null,
          page: null,
          book: null,
          degree: null,
          lat: null,
          lan: null,
          slider_id: "23",
          deleted_at: null,
          slider: {
            id: 23,
            name: "اسلایدر اصلی",
            show_type: "0",
            created_at: "2020-12-28 12:06:14",
            updated_at: "2022-04-12 13:04:18",
            slides: [
              {
                id: 64,
                slider_id: "23",
                media_id: "1934",
                cover_id: null,
                type_id: "0",
                order: "0",
                created_at: "2020-12-30 10:07:15",
                updated_at: "2022-04-12 13:03:51",
                media_url: "https:\/\/polorest.ir\/loadImage\/1934",
                cover_url: null,
              },
            ],
          },
          answers: [
            {
              id: 1327,
              question_id: "183",
              title: "گوجه زیاد",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1328,
              question_id: "183",
              title: "نان زیاد",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1329,
              question_id: "183",
              title: "برشته",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
            {
              id: 1330,
              question_id: "183",
              title: "آبدار",
              image_id: null,
              is_right: "0",
              score: null,
              deleted_at: null,
            },
          ],
          type: {
            id: 1,
            title: "چند گزینه ای",
            active: "1",
            created_at: null,
            updated_at: null,
          },
        },
      },
      {
        id: 639,
        exam_id: "133",
        question_id: "184",
        score: null,
        exam_order: "5",
        question: {
          id: 184,
          bank_id: "26",
          title: "توضیحات",
          description: null,
          type_id: "3",
          is_force: "0",
          image_id: null,
          video_id: null,
          score: "1",
          session: null,
          page: null,
          book: null,
          degree: null,
          lat: null,
          lan: null,
          slider_id: "23",
          deleted_at: null,
          slider: {
            id: 23,
            name: "اسلایدر اصلی",
            show_type: "0",
            created_at: "2020-12-28 12:06:14",
            updated_at: "2022-04-12 13:04:18",
            slides: [
              {
                id: 64,
                slider_id: "23",
                media_id: "1934",
                cover_id: null,
                type_id: "0",
                order: "0",
                created_at: "2020-12-30 10:07:15",
                updated_at: "2022-04-12 13:03:51",
                media_url: "https:\/\/polorest.ir\/loadImage\/1934",
                cover_url: null,
              },
            ],
          },
          answers: [],
          type: {
            id: 3,
            title: "توصیفی",
            active: "1",
            created_at: null,
            updated_at: null,
          },
        },
      },
    ],
  },
};

function AnswerExamQuestions() {
  // const { data, isLoading, isPending, isError, error } =
  //   useGetListOfBeforePayQuestions();

  // if (isLoading || isPending) return <ExamQuestionSkeleton />;

  // if (isError)
  //   return (
  //     <AlertBox variant="danger">
  //       {error.response?.data.message || "خطایی رخ داده است."}
  //     </AlertBox>
  //   );

  if (data)
    return (
      <div className="space-y-10">
        <h2 className="text-[17px] font-black lg:text-[23px]">
          {data.data.title}
        </h2>

        <QuestionList />
      </div>
    );
}

function QuestionList() {
  return (
    <div className="grid grid-cols-1 gap-2 md:grid-cols-4">
      {data.data.questions.map((item) => {
        const type = item.question.type.id;

        switch (type) {
          case 1:
            return (
              <MultiAnswer key={item.question_id} question={item.question} />
            );

          case 2:
            return (
              <SingleAnswer key={item.question_id} question={item.question} />
            );

          case 3:
            return (
              <SimpleInput key={item.question_id} question={item.question} />
            );

          default:
            return <></>;
        }
      })}
    </div>
  );
}

function FormFieldsLayout({
  children,
  title,
}: {
  children: ReactNode;
  title: string;
}) {
  return (
    <div className="rounded-8px col-span-2 space-y-6 bg-white p-4">
      <h3 className="text-sm font-semibold md:text-base">{title}</h3>

      <div>{children}</div>
    </div>
  );
}

function SingleAnswer({ question }: In_ExamFormFieldsProps) {
  return (
    <FormFieldsLayout title={question.title}>
      <div className="space-y-4">
        {question.answers.map((answer) => {
          return (
            <div className="flex content-center items-center gap-2">
              <input
                type="radio"
                name={`question-${question.id}`}
                id={`answer-${answer.id}`}
                className="accent-p-red size-3.5 md:size-4"
              />

              <label
                className="cursor-pointer text-xs md:text-[15px]"
                htmlFor={`answer-${answer.id}`}
              >
                {answer.title}
              </label>
            </div>
          );
        })}
      </div>
    </FormFieldsLayout>
  );
}

function MultiAnswer({ question }: In_ExamFormFieldsProps) {
  return <FormFieldsLayout title={question.title}>div</FormFieldsLayout>;
}

function SimpleInput({ question }: In_ExamFormFieldsProps) {
  return <FormFieldsLayout title={question.title}>div</FormFieldsLayout>;
}

export { AnswerExamQuestions };
